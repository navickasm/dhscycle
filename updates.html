<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Devlog | DHSCycle</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Anton&family=Roboto+Slab&display=swap');

    :root {
      --main: #e98888;
      --light: #e6c3c3;
      --link: #eea5a5;
      --bg: #ffffff;
      --text: #000000;
      --othertext: #000000;
      --pn: #000000;
      --border: #e8e8e8;
      select: none;
    }

    body {
      width: 70%;
      height: 100%;
      font-family: 'Roboto Slab', serif;
      color: var(--text);
      background-color: var(--bg);
      -webkit-user-select: var(--select);
      -ms-user-select: var(--select);
      user-select: var(--select);
      margin-left: auto;
      margin-right: auto;
    }

    .he {
      width: 33.33%;
    }

    .header {
      text-align: center;
    }

    .update {
      border: 1px solid var(--border);
      margin: 10px 0;
      padding: 10px;
      cursor: zoom-in;
      margin-left: auto;
      margin-right: auto;
    }

    .update.open {
      cursor: zoom-out;
    }

    .update-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .update-details {
      display: none;
      margin-top: 10px;
    }

    .update.open .update-details {
      display: block;
    }

    .update h3 {
      color: var(--main);
      margin: 0;
    }

    .update p {
      margin: 0;
    }

    .cutext {
      color: var(--text) !important;
      text-align: center;
    }

    .name {
      text-align: right;
    }

    .current {
      background-color: var(--border);
      border-color: var(--text)
    }

    .p {
      font-family: monospace;
    }

    .funame {
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div class="header">
    <h1>DHSCycle Devlog</h1>
    <p><i>Click on update boxes to view more information</i></p>
  </div>

  <div id="updatesContainer" class="cu">
  </div>

  <div class="fu">
    <div class="header">
      <h2>Future Updates</h2>
    </div>

    <ul>
      <li><span class="funame">Passing Period Update: </span>During a passing period, the border for that passing period will turn the main color.</li>
      <li><span class="funame">Custom Classes Update: </span>Users can input their classes, which are then stored and
        displayed.</li>
      <li><span class="funame">Hover Update: </span>Hovering over the period will show time remaining if possible, and
        total time (similar to the bell schedule)</li>
      <li><span class="funame">This Week Update: </span>At the bottom of the page, a "This Week" table will show similar
        to the ones on the slideshows around the school. Users will be able to click on any day and the schedule for
        that day will appear. Below this table will be five cells which take the user to the cycle schedule for each
        regular day.</li>
      <li><span class="funame">Theme Dropdowns: </span>In addition to custom colors, users can pick from custom themes
        from a dropdown submitted by users</li>
      <li><span class="funame">SSSeparation: </span>Separate SSS JS from the actual game.js file</li>
      <li><span class="funame">Game Menu</span></li>
      <li><span class="funame">Game 2: </span>Add a second, even more secret game (probably Snake)</li>
      <li><span class="funame">TypeScript Update: </span>Replacing all JS code with TypeScript compiled code.</li>
    </ul>
  </div>

  <div id="settings" style="text-align: center; margin-top: 10px; font-size: 10pt;">
    <input type="checkbox" id="selectcb" name="selectcb">
    <label for="selectcb">Select text (not recommended)</label>
  </div>

  <script>
    const updatesContainer = document.getElementById("updatesContainer");
    const selectCb = document.getElementById("selectcb");

    fetch('./assets/updates.json')
      .then(response => response.json())
      .then(updates => {
        updates.forEach((update, i) => {
          if (!update.hidden) {
            const updateElement = createUpdateElement(update, i === 1);
            updatesContainer.appendChild(updateElement);
          }
        });
      });

    function createUpdateElement(update, c) {
      const updateDiv = document.createElement('div');
      updateDiv.classList.add('update');

      if (c) {
        updateDiv.classList.add('open', 'current');
      }

      const updateHeader = document.createElement('div');
      updateHeader.classList.add('update-header');
      updateHeader.innerHTML = `
        <h3 class="version he">${update.version}</h3>
        <h3 class="cutext he">${c ? 'Current Update' : ''}</h3>
        <h3 class="name he">${update.name || ''}</h3>
      `;

      const updateDetails = document.createElement('div');
      updateDetails.classList.add('update-details');
      updateDetails.innerHTML = `
        <p class="description">${update.description}</p>
        <ul class="changes">${update.changes.map(change => `<li>${change}</li>`).join('')}</ul>
        <p class="date">Released ${update.date}</p>
        <p class="thanks">${update.thanks || ''}</p>
      `;

      updateDiv.appendChild(updateHeader);
      updateDiv.appendChild(updateDetails);

      updateDiv.addEventListener('click', () => {
        updateDiv.classList.toggle('open');
      });

      return updateDiv;
    }

    selectCb.addEventListener("change", function () {
      if (selectCb.checked) {
        document.documentElement.style.setProperty("--select", "auto");
      } else {
        document.documentElement.style.setProperty("--select", "none");
      }
    });
  </script>
  
  <script src="web/colorgetter.js"></script>
</body>

</html>